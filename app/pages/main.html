<div id="topnav">
    <a ng-href="/#!about">about showhaus</a>
    <a ng-href="/#!about">add a feed</a>
    <div onclick="location.href='#!post';">
        <a ng-href="/#!post" class="postashow">[ POST A SHOW ]</a>
    </div>
</div>
    <div id="logo_container">
  <div class="logo" onclick="window.location = '#!main';"></div>
  <div class="home_description">
    a very friendly and very wise show aggregator
  </div>

  <div id="filter_contain" style="margin: 0 auto;">
    <div id="filter">
      <div class="filter_city">
        <select class="chosen-select" data-placeholder="SELECT CITY"
                id="filter_city" name="city" ng-model="citySelect" ng-change="resetVenues(); setNewCookie()">
          <option value="">All Cities</option>
          <option>Baltimore</option>
          <option>Brooklyn</option>
          <option>DC</option>
        </select>
      </div>
      <div class="filter_venue">
        <select ng-model="venueSelect" class="chosen-select" data-placeholder="SELECT VENUE"
                id="filter_venue" name="venue">
          <option value="">All Venues</option>
          <option ng-repeat="venue in venues | filter:citySelect" ng-show="citySelect">{{venue[1]}}</option>
        </select>
      </div>
      <div class="filter_free">
        <input type="checkbox" ng-model="freebox" ng-true-value="true" ng-false-value=""> <span class="free">FREE</span> shows
        only
      </div>
      <div class="filter_view">
        view:
        <span class="view"><a href="" ng-click="list=true; grid=false">[list]</a></span>
        <span class="view"><a href="" ng-click="grid=true; list=false">[gallery]</a></span>
      </div>
    </div>
  </div>
</div>
<div ng-show="loading" style="text-align:center;">
	<div class="loading">
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
	</div>
</div>
<div class="listview_contain" style="margin: 0 auto;" ng-show="list" ng-hide="loading">
  <!-- table -->
  <table class="gridtable">
    <tr>
      <th class="datetime">date/time</th>
      <th class="title">title of show</th>
      <th class="tableprice">$$$</th>
      <th class="tablevenue">venue</th>
    </tr>
    <tbody class="theEvents">
      <tbody ng-repeat="event in events | filter:{city:citySelect} | filter:{venue:venueSelect} | filter:{price:freeShows}">
        <tr ng-class="event.featured=='today' ? 'list_today':''" ng-click="go('{{event.id}}')">
          <td class="list_align">
            <strong>{{event.date}}</strong>
            <br/>
            <div class="list_subtext">{{event.time}}</div>
          </td>
          <td>
            <span class="titles">
              <strong>{{event.title}}</strong>
              <span class="subtitle" ng-if="event.subtitle">{{event.subtitle}}</span>
            </span>
            <div class="list_category">{{event.tag1}}</div>
            <div class="list_category" ng-if="event.tag2">{{event.tag2}}</div>
          </td>
          <td class="list_align">
            <span class="free" ng-if="event.price==0">free</span>
            <span ng-if="event.price>0">${{event.price}}</span>
          </td>
          <td class="list_align">
            <strong>{{event.venue}}</strong>
            <br/>
            <div class="list_subtext" ng-if="event.address">{{event.address}}</div>
          </td>
        </tr>
        </tbody>
    </tbody>
  </table>
</div>

<!-- ░░░░░░░░░░░░░░░░ gallery element ░░░░░░░░░░░░░░░░ -->

<div class="gridview_contain" ng-show="grid">
    <div class="show" ng-repeat="event in events | filter:{city:citySelect} | filter:{venue:venueSelect} | filter:{price:freebox}">

    <!-- venue -->
    <div class="venue">
        <div class="title">{{event.venue}}</div>
    </div>

    <!-- art -->
    <div class="art">
    <a href="/#!showpage?post={{event.id}}">
        <div class="poster" ng-switch ng-style="{'background-image':'url('+event.poster+')'}"></div>
    </a>
</div>

    <div class="description">

    <!-- date -->
        <div class="divider"></div>
        <span class="date"><strong>{{event.date}}</strong> @ {{event.time}} </span>
        <div class="divider"></div>
        <br>

    <!-- title -->
         <span class="title"><a href="/#!showpage?post={{event.id}}">{{event.title}}</a></span>
         <br>

     <!-- subtitle -->
         <span class="act">{{event.subtitle}}</span><br>


    </div>

    <div class="showfooter">

     <!-- tags -->
     <span class="categoryone">{{event.tag1}}</span>
     <span class="categorytwo" ng-if="event.tag2">{{event.tag2}}</span>


     <!-- tickets & price -->
      <span class="tickets">
		<span class="price" ng-if="event.price==0">&nbsp;free</span>
        <span class="price" ng-if="event.price>0">&nbsp;$ {{event.price}}&nbsp;</span>
				[ <a href="#" >GET TICKETS</a> ]
			</span>
    </div>

</div>

<!-- ░░░░░░░░░░░░░░░░ end gallery element ░░░░░░░░░░░░░░░░ -->

<script>
  function loadChosen() {
    $('select').chosen().trigger('chosen:updated');
    $('#filter_city').change(function () {
      $('select').trigger('chosen:updated');
    });
  }
  loadChosen();
  $(window).bind("blur focus focusin focusout load resize scroll unload click " +
    "dblclick mousedown mouseup mousemove mouseover mouseout mouseenter " +
    "mouseleave change select submit keydown keypress keyup error",function() {
    loadChosen();
  });
</script>
