<!-- Header
================================================ -->

<section class="showhaus-lead" ng-if="!showPage">

	<!-- Description -->
	<div class="lead-description" ng-if="firstTimeVisitor">
		&#128075; &nbsp;&nbsp;Hello, Showhaus is a friendly local concert aggregator. Learn more about how it works <a href="#!/about">here</a>.
		<a title="dismiss" class="fa fa-times closeTopBar" aria-hidden="true" ng-click="dismissHelp()"></a>
	</div>

	<!-- Logo -->
	<div class="lead__logo">
		<a href="http://showhaus.org"><img class="logo-item" src="../assets/header.png"></a>
	</div>

	<!-- Main Nav -->
	<nav class="lead__main-nav">
		<ul class="main-nav-contain">
			<li class="main-nav__item">
				<a href="#!/about">About</a>
			</li>
			<li class="main-nav__item">
				<a href="#!/feeds">Data Feeds</a>
			</li>
			<li class="main-nav__item">
				<a href="#!/post">Submit a Show</a>
			</li>
		</ul>
	</nav>

	<!-- Filter -->
	<div class="content-filter filter">
		<div class="filter-contain city-filter">
			<select ng-change="setNewCookie($event); resetVenues()" ng-model="citySelect">
				<option ng-if="events.length" ng-repeat="city in events | unique:'city'">{{city.city}}</option>
				<option ng-if="!events.length" disabled selected="selected">loading</option>
			</select>
		</div>

		<div class="filter-contain venue-filter">
			<select id="select-beast venueSelect" class="filter-drop" placeholder="-- select venue --" ng-model="venueSelect" name="venue">
				<option value="">-- all venues --</option>
				<option ng-if="(events|filter:{city:citySelect}|filter:{venue:venue.venue}|isFeatured:{featured:staffPicks}| isFree:{price:freeBox}).length" ng-repeat="venue in events | filter:citySelect | unique:'venue' | orderBy: 'venue'">{{venue.venue}}</option>
			</select>
		</div>

		<div class="filter-contain staff-filter">
			<input id="staff-pick" type="checkbox" name="staff" ng-click="staffPicks = !staffPicks">
			<label for="staff-pick"><span class="staff-pick">Staff Picks</span></label>
		</div>

		<div class="checkbox">
			<input id="free" type="checkbox" name="free" value="free" ng-click="freeBox = !freeBox">
			<label for="free" >Free Shows Only</label>
		</div>
	</div>

</section>

<!-- Content Lead
================================================ -->
<section ng-if="!showPage" class="main-content-lead">

		<div class="city-heading__extra-info">
			<h3 class="city-heading__header">Displaying <strong>{{(events|filter:{city:citySelect}|filter:{venue:venueSelect}|isFeatured:{featured:staffPicks}| isFree:{price:freeBox}).length}} upcoming concerts</strong> in {{citySelect}}.</h3>
			Please double check show times and venues as they are subject to change!</p>
		</div>
	</div>


</section>



<span class="ask"></span>

<!--
<div style="display: block; margin: 80px 0 20px 0; text-align: center; color: lightgray;">
	<h3>UPCOMING NYC SHOWS</h3>
	<i>* please double check listings for accuracy</i>
</div>
-->

<!--â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ loading â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘-->
<div ng-show="loading" style="text-align:center; margin: 30px 20px -10px 20px">
	<div class="loading">
		Loading...<br>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
	</div>
</div>

<div class="content" ng-if="!showPage">

	<!--â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ begin show list â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘-->

	<!-- show -->
	<div class="show-contain" ng-class="event.date==today ? 'today' : ''" dir-paginate="event in filtered = (events | filter: {city:citySelect} | filter:{venue:venueSelect} | isFeatured:{featured:staffPicks} | isFree:{price:freeBox}) | orderBy: orderByDate | itemsPerPage: numItems track by $index">
		<div class="show-detail-contain">

			<!-- date / time -->
			<div class="show-date">

				<div class="day" ng-if="event.date!=today && event.date!=tomorrow">
					<span ng-if="nextWeek(event.date) != 'true'">{{nextWeek(event.date)}}</span>
					<span ng-if="nextWeek(event.date) == 'true'">{{event.date}}</span>
					<span ng-if="nextWeek(event.date) != 'true'">{{getDay(event.date)}}</span>
				</div>

				<div class="day" ng-if="event.date==today">Today</div>
				<div class="day" ng-if="event.date==tomorrow">Tomorrow</div>
				<!-- <div class="date" ng-class="(event.date==today || event.date==tomorrow) ? day : date" >
					<span ng-if="nextWeek(event.date) == 'true'">{{getDay(event.date)}}</span>
					<span ng-if="nextWeek(event.date) != 'true'">{{event.date}}</span>
				</div> -->
				<div class="time">{{event.time}}</div>
			</div>

			<!-- venue -->
			<div class="show-venue">
				<div class="venue">{{event.venue}}</div>
				<div class="address"><a rel="nofollow" ng-click="popupMap($event, event.address, event.city);" target="_blank">{{event.address}}</a></div>
			</div>

			<!-- title -->
			<div class="show-title">
				<span class="title" ng-if="!event.fb_event" ng-click="go(event); sendToGoogle(event.city, event.title, event.venue)"><a href="javascript:void(0);">{{event.title}}</a></span>
				<span class="title" ng-if="event.fb_event"><a ng-click="go(event); sendToGoogle(event.city, event.title, event.venue)" href="javascript:void(0);">{{event.title}}</a>
					<i style="vertical-align: middle; margin: 0 0 0 8px; color: #C3C3C3;" class="fa fa-external-link" alt="outbound_event" ng-if="event.fb_event" ng-click="go(event)"></i>
				</span>
				<span class="title">
					<span class="show-price" ng-if="event.price>0">${{event.price}}</span>
					<span class="show-price" ng-if="event.price==0 || (event.price==-1&&!event.ticket_uri)">
						<span style="display:none">{{event.price=0}}</span>free
					</span>
					<span ng-if="event.featured!==''" class="staff-pick">staff pick</span>

					<div class="staff-notes" ng-if="event.featured!==''&&event.featured!=='0'">{{event.featured}}</div>


					<div class="admin" ng-if="editMode">
<!--
						<a ng-click="editItem('edit', null, event.id)" href="#">edit show</a>
-->
						<a ng-click="editItem('delete', null, event.id)" href="#">delete show</a>
<!--
						<span class="editError {{event.id}}">Parsed shows cannot be edited.</span>
-->

						<div class="checkbox">
							<input type="checkbox" ng-if="event.featured==0||event.featured==''" ng-click="event.isChecked = !event.isChecked"/>
							<input type="checkbox" ng-if="event.featured!==''" ng-checked="event.featured" disabled/>
							<label>staff pick</label>
						</div>

						<div class="staff-notes" ng-if="event.isChecked || event.featured!==''">
							<textarea ng-model="event.featured" placeholder="Staff notes go here - ONLY FILL THIS OUT IF YOU ARE FEATURING A SHOW."></textarea>
						</div>

					</div>
						<a href="javascript:void(0);" ng-if="event.isChecked" ng-click="editItem('staffPick', event.featured, event.id)"><span class="save"> ðŸ’¾ save & publish</span></a>

				</span>

				<!-- tickets, if applicable -->
				<div ng-if="event.ticket_uri">
					<a href="javascript:void(0);" class="show-tickets btn btn-sm" ng-click="sendToGoogle(event.city, event.title, event.venue, event.ticket_uri); extshow(event.ticket_uri)">ðŸš€ Get Tickets &nbsp;&nbsp;</a>
				</div>
		</div>


			<!-- show page -->
			<div class="expand-contain" ng-hide="event.fb_event">
				<!-- disabling images for now
				<div class="show-img">
					<img src="{{event.poster}}">
				</div>
			-->

				<!-- description -->
				<div class="show-description" ng-bind-html="event.description"></div>
				<!--
				<div class="expand-close" ng-click="collapse($event)">
					<a href="#">&#9650; CLOSE &#9650;</a>
				</div>
			-->
			</div>
		</div>
	</div>

	<!-- end show -->
	<div class="pagination-container">
		<dir-pagination-controls
				max-size="7"
				direction-links="true"
				boundary-links="true" >
		</dir-pagination-controls>
	</div>
</div>
<div class="content" ng-if="showPage">
	<div id="static_topnav">
		<div class="breadcrumbs">
			<a href="javascript:void(0);" ng-click="$parent.showPage = !$parent.showPage">SHOWHAUS</a> &gt;
			<span id="showpage_title_breadcrumbs">{{event.title}}</span>
		</div>
	</div>
	<div id="showpage_util">
		<div class="showpage_share"><strong>share:</strong>
     <span class="share_fb">
        <a ng-click="fbshare({{event.id}})">[ FACEBOOK ]</a>
      </span>
      <span class="share_twitter">
        <a ng-href="https://twitter.com/intent/tweet?url=http://showha.us/?post={{event.id}}&text={{event.title}}&hashtags=showhaus,{{event.city}},{{event.venue}}">[ TWITTER ]</a>
      </span>
		</div>
		<div class="showpage_tags"><strong>tags:</strong> "{{event.tag1}}" <span ng-if="event.tag2!=''">"{{event.tag2}}"</span></div>




	</div>
	<show-page events="events"></show-page>
</div>
<showhaus-footer main-page="true"></showhaus-footer>
